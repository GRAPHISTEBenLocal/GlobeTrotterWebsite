<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Support - GlobeTrotter VTC</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Loader */
    #loader {
      display: none; position: fixed; top:0; left:0; width:100%; height:100%;
      background:#070b24; align-items:center; justify-content:center;
      z-index:9999; flex-direction: column;
    }
    .spinner span {
      display: block; width: 15px; height: 15px; margin: 5px;
      background: #fff; border-radius: 50%;
      animation: bounce 1.2s infinite ease-in-out;
    }
    @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

    /* Navbar */
    nav {
      display: flex; justify-content: center; gap: 50px;
      padding: 25px 0; font-size: 18px; position: relative;
    }
    nav a {
      text-decoration: none; color: #fff; font-weight: 600;
      transition: all 0.3s ease;
    }
    nav a:hover { font-size: 20px; color: #f83d3d; }

    /* Form box glow */
    .login-box {
      position: absolute;
      top: 50%; left: 50%;
      width: 400px; padding: 40px;
      transform: translate(-50%, -55%);
      border-radius: 12px;
      color: #111; z-index: 1; 
      background: rgba(255,255,255,0.05); 
      backdrop-filter: blur(20px);
      overflow: hidden;
    }
    .login-box::before,
    .login-box::after {
      content: ''; position: absolute; top:0; left:50px;
      width: 50%; height:100%; border-radius: 12px;
      filter: blur(30px);
      z-index: 0;
    }
    .login-box::after { left:50px; }
    .login-box:hover::before,
    .login-box:hover::after {
      transform: skewX(0deg); left: 20px; width: calc(100% - 90px);
    }

    /* Form content */
    .login-box p:first-child {
      margin: 0 0 30px; text-align: center; font-size: 1.5rem;
      font-weight: bold; letter-spacing: 1px; color: #fff;
      position: relative; z-index: 1;
    }
    .login-box .user-box { position: relative; z-index: 1; }
    .login-box .user-box input,
    .login-box .user-box textarea {
      width: 100%; padding: 10px 0; font-size: 16px; margin-bottom:30px;
      border: none; border-bottom: 1px solid #fff; outline: none; background: transparent;
      color: #fff; resize: none;
    }
    .login-box .user-box label {
      position: absolute; top:0; left:0; padding:10px 0;
      font-size:16px; color:#fff; pointer-events:none; transition:0.5s;
    }
    .login-box .user-box input:focus ~ label,
    .login-box .user-box input:valid ~ label,
    .login-box .user-box textarea:focus ~ label,
    .login-box .user-box textarea:valid ~ label {
      top:-20px; font-size:12px; color:#fff;
    }
    .login-box form a {
      position: relative; display:inline-block; padding:10px 20px;
      font-weight:bold; color:#111; font-size:16px; text-decoration:none;
      text-transform:uppercase; overflow:hidden; margin-top:40px; letter-spacing:3px;
      background:#fff; border-radius:6px; z-index:1;
    }
    .login-box form a:hover { background: linear-gradient(315deg, #ffbc00, #ff0058); color:#fff; }

    .login-box p:last-child { color: #aaa; font-size:14px; text-align:center; position:relative; z-index:1; }
    .login-box a.a2 { color: #fff; text-decoration: none; }
    .login-box a.a2:hover { color: #aaa; }

    /* Success notification */
    .notifications-container { width: 320px; font-size: 0.875rem; line-height: 1.25rem; display: flex; flex-direction: column; gap: 1rem; animation: slideIn 0.4s ease-out; position: fixed; top: 20px; right: 20px; z-index: 9999; }
    .flex { display: flex; } .flex-shrink-0 { flex-shrink: 0; }
    .success { padding: 1.25rem; border-radius: 0.75rem; background-color: rgb(240 253 244); box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 1px solid rgba(74,222,128,0.2); transition: all 0.3s ease; }
    .success-svg { color: rgb(74 222 128); width: 1.5rem; height: 1.5rem; filter: drop-shadow(0 0 8px rgba(74, 222, 128, 0.4)); animation: pulse 2s infinite; }
    .success-prompt-wrap { margin-left: 1rem; }
    .success-prompt-heading { font-weight: 700; color: rgb(22 101 52); font-size: 1.05rem; display: flex; align-items: center; gap: 0.5rem; }
    .checkmark { color: rgb(74 222 128); animation: scaleCheck 0.3s ease-in-out; }
    .success-prompt-prompt { margin-top: 0.75rem; color: rgb(21 128 61); line-height: 1.5; }
    .success-button-container { display: flex; margin-top: 1rem; gap: 0.75rem; }
    .success-button-secondary { padding: 0.5rem 1rem; background-color: rgb(240 253 244); color: rgb(22 101 52); font-size: 0.875rem; font-weight: 600; border-radius: 0.5rem; border: 1px solid rgba(22,101,52,0.2); transition: all 0.2s ease; cursor: pointer; }
    .success-button-secondary:hover { background-color: rgb(220,243,234); border-color: rgba(22,101,52,0.3); transform: translateY(-1px); }
    @keyframes slideIn { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    @keyframes scaleCheck { 0% { transform: scale(0); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
  </style>
</head>
<body>

<!-- Loader -->
<div id="loader">
  <div class="spinner"><span></span><span></span><span></span><span></span></div>
  <p style="margin-top: 20px; font-size: 18px; font-weight: bold; color: #fff; text-align:center;">Loading...</p>
</div>

<!-- Navbar -->
<nav>
  <a href="index.html">Home</a>
  <a href="convoy.html">Convoys</a>
  <a href="formulaire.html">Support</a>
  <a href="driver.html">Driverhub</a>
</nav>

<style>
  /* Particles background */
    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #5fa8f5;
      border-radius: 50%;
      opacity: 0.7;
      animation: float 10s linear infinite;
      overflow-x: hidden;
    }

    @keyframes float {
      0% { transform: translateY(0) translateX(0); opacity: 0.7; }
      50% { opacity: 0.4; }
      100% { transform: translateY(-1200px) translateX(100px); opacity: 0; }
    }
 </style>

 <!-- Particles -->
<script>
  const body = document.body;
  const numParticles = 50;
  for(let i=0;i<numParticles;i++){
    const particle = document.createElement('div');
    particle.classList.add('particle');
    particle.style.left = Math.random()*window.innerWidth + 'px';
    particle.style.top = Math.random()*window.innerHeight + 'px';
    particle.style.width = particle.style.height = (Math.random()*4+2)+'px';
    particle.style.animationDuration = (Math.random()*5+5)+'s';
    body.appendChild(particle);
  }
</script>

<!-- Form -->
<div class="login-box">
  <p>Need Help?</p>
  <form id="helpForm">
    <div class="user-box">
      <input required type="text" id="discord">
      <label>Discord Username</label>
    </div>
    <div class="user-box">
      <input required type="email" id="email">
      <label>Email</label>
    </div>
    <div class="user-box">
      <textarea required rows="4" id="message"></textarea>
      <label>Your Message</label>
    </div>
    <a id="submitBtn">Send</a>
  </form>
  <p>Problem with the form? <a href="https://discord.com/invite/7axxEMyz54" class="a2" target="_blank">Join our Discord!</a></p>
</div>

<!-- Success Notification -->
<div class="notifications-container" id="notification" style="display:none;">
  <div class="success">
    <div class="flex">
      <div class="flex-shrink-0">
        <svg aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" class="success-svg">
          <path clip-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" fill-rule="evenodd"></path>
        </svg>
      </div>
      <div class="success-prompt-wrap">
        <p class="success-prompt-heading">Message Sent <span class="checkmark">âœ“</span></p>
        <div class="success-prompt-prompt"><p>Your message has been successfully sent!</p></div>
        <div class="success-button-container"><button class="success-button-secondary" type="button" id="dismissBtn">Dismiss</button></div>
      </div>
    </div>
  </div>
</div>

<script>
  const loader = document.getElementById('loader');
  document.querySelectorAll('nav a').forEach(link => {
    link.addEventListener('click', e => {
      const href = link.getAttribute('href');
      if (!href.startsWith('http') && !href.startsWith('#')) {
        e.preventDefault(); loader.style.display='flex';
        setTimeout(()=>{ window.location.href = href; },500);
      }
    });
  });

  const submitBtn = document.getElementById('submitBtn');
  const notification = document.getElementById('notification');
  const dismissBtn = document.getElementById('dismissBtn');

  submitBtn.addEventListener('click', e=>{
    e.preventDefault();

    // Cooldown 24h
    const lastSubmit = localStorage.getItem('lastSubmitTime');
    const now = new Date().getTime();
    const cooldown = 24 * 60 * 60 * 1000; // 24h

    if (lastSubmit && now - lastSubmit < cooldown) {
      const remaining = cooldown - (now - lastSubmit);
      const hours = Math.floor(remaining / (1000*60*60));
      const minutes = Math.floor((remaining % (1000*60*60)) / (1000*60));
      alert(`You can submit the form again in ${hours}h ${minutes}m.`);
      return;
    }

    const discord=document.getElementById('discord').value;
    const email=document.getElementById('email').value;
    const message=document.getElementById('message').value;
    const webhookUrl='https://discord.com/api/webhooks/1420711064345247844/Z-BCLjbYZlubHUswUQPbhiwDyGChBNYvBYNcZcarqrEO_aeXlysmj9dIyl8rZMseqBpf';
    
    fetch(webhookUrl,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({content:`**New Help Request**\n**Discord:** ${discord}\n**Email:** ${email}\n**Message:** ${message}`})
    }).then(()=>{
      notification.style.display='flex';
      document.getElementById('helpForm').reset();
      localStorage.setItem('lastSubmitTime', now); // sauvegarde du cooldown
    })
    .catch(err=>{alert('Error sending message. Try again.'); console.error(err);});
  });

  dismissBtn.addEventListener('click', ()=>{notification.style.display='none';});
</script>
</body>
</html>
